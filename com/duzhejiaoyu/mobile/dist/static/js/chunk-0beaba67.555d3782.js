(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0beaba67"],{"7d7c":function(e,t,i){},c9b9:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAQCAYAAAAbBi9cAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEqADAAQAAAABAAAAEAAAAADgaeE1AAABsElEQVQ4EY2UPUjDUBDH715raqW0k6sOWpcqYk0dLQiCu7oIOgv1Y3Z3c/EDQVcHF3XoLDg51RgR7WJxd3IotrRJm/MuWnipDfZBkvv43f8d7x1BCFmW9bQK6G0AwayPIDwCqQvTnLnqVYLdwXK5bNQbzUsgWu7O/QjizdBgbC2TyTh6XumO2PVGYz9URADewGfE1lagI8t6GQN034jozwZaDSCiBzQwYZpT7514oEApN/+fiBQKg+jMd0Tk63dUqVRi1erXCgM7BDSnA47zcxSGYehhLsQSd3acTCau0+l0E23bHm57dMfUZID8dUoPlr9bLmf2SkvsNaJwIep5cMBOTxGhPI+4b37C16RoKEaWwpn+MqLBhwat/vBwSjT41qgYjvSboaJKJZN7fHX3/ZZ0c1IrGlG+uipfe962nxc9aE8jYUzger2WMIxYUym1KX671T5zXdeIx+M18QmpqSDynM1O38qABiZbgM46PDl9YjshPkMDfpzgc3enkPXtrldgsvUcKthGohSP8Th3PEoEBkRgS2d0O7QjgY7Oz0fAcfm3gdWogvVCofChF+v2NybDmG+oYPNHAAAAAElFTkSuQmCC"},e8ef:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page",attrs:{id:"pages"}},[a("van-sticky",[a("van-nav-bar",{attrs:{title:"入馆考试","left-arrow":""},on:{"click-left":e.onClickLeft}})],1),a("div",{staticClass:"learn-content"},[a("div",{staticClass:"content-left"},["1"!=e.detail.type?a("h3",[e._v(e._s(e.detail.name))]):e._e(),"1"!=e.detail.type?a("div",{staticClass:"sub"},[a("p",{staticClass:"w"},[e._v(" "+e._s(e.detail.watchCount)+"阅读 "+e._s("2"==e.detail.type?" . "+e.detail.downloadCount+"下载":"")+" ")]),"2"==e.detail.type?a("p",{staticClass:"download",on:{click:e.downloadF}},[a("img",{attrs:{src:i("c9b9")}}),e._v("下载 ")]):e._e()]):e._e(),e.detail.id?a("div",{staticClass:"video-box"},["1"==e.detail.type?a("video",{ref:"video",attrs:{src:e.fileViewUrl+e.detail.id,controls:"","x5-video-player-type":"h5","webkit-playsinline":"",playsinline:""}},[e._v(" 您的浏览器不支持HTML5 video标签 ")]):e._e(),"2"==e.detail.type?a("iframe",{ref:"pdf",staticClass:"iframepdf",attrs:{src:"./static/pdf/web/viewer.html?file="+e.fileViewUrl+e.detail.id,frameborder:"0",id:"pdfContainer",name:"pdfContainer",width:"100%",height:"450px"}}):e._e()]):e._e(),"1"==e.detail.type?a("h3",{staticStyle:{margin:"5px 0"}},[e._v(" "+e._s(e.detail.name)+" ")]):e._e(),"1"==e.detail.type?a("div",{staticClass:"sub"},[a("p",{staticClass:"w"},[e._v(" "+e._s(e.detail.watchCount)+"阅读 · "+e._s("1"==e.detail.type?e.detail.downloadCount+"下载":"")+" ")]),"1"==e.detail.type?a("p",{staticClass:"download",on:{click:e.downloadF}},[a("img",{attrs:{src:i("c9b9")}}),e._v("下载 ")]):e._e()]):e._e(),a("div",{staticClass:"desc-box"},[a("img",{attrs:{src:e.imgViewUrl+e.detail.cover,alt:""}}),a("div",{staticClass:"desc",class:{hide:!e.isActive,act:e.isActive}},[e.detail.desc&&e.detail.desc.length>70?a("button",{staticClass:"btn",on:{click:function(t){e.isActive=!e.isActive}}},[e._v(" "+e._s(e.isActive?"收起":"展开")+" ")]):e._e(),e._v(" "+e._s(e.detail.desc)+" ")])]),"3"==e.detail.type?a("div",{staticClass:"dhtml",domProps:{innerHTML:e._s(e.detail.dhtml)}}):e._e()]),a("div",{staticClass:"content-right",attrs:{id:"content-right"}},[a("div",{staticClass:"section4",on:{click:e.toLearnId}},[e._m(0)]),a("div",{staticClass:"learn-list"},[a("h3",[e._v("接下来学习")]),a("ul",e._l(e.modelLearnList,(function(t,i){return a("li",{key:i,class:{active:t.id==e.detail.id},on:{click:function(t){return e.changeLearn(i)}}},[a("i",{class:"iconfont icon-learn-"+t.type}),a("span",{staticClass:"title ellipsis"},[e._v(e._s(t.name)+" "),3!=t.type?a("span",{staticClass:"size"},[e._v(e._s(e.common.learnSizeFormat(t.fileSize)))]):e._e()]),a("p",{staticClass:"ellipsis"},[e._v(e._s(t.desc))])])})),0)])])])],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"infoBox2"},[e._v("学"),i("br"),e._v("习"),i("br"),e._v("更"),i("br"),e._v("多")])}],s=i("5530"),r=(i("ac1f"),i("1276"),i("7db0"),i("d3b7"),i("4de4"),i("159b"),i("caad"),i("2532"),i("2f62")),l=i("39f0"),c={name:"examLearnId",data:function(){return{modelId:null,learnId:null,fileViewUrl:window.g.fileViewUrl,imgViewUrl:window.g.viewUrl,timer:null,learnTimes:0,nowLearnTime:0,nowTimer:null,lastNeedLearn:0,records:[],loading:!1,top:"751px",isActive:!1}},computed:Object(r["b"])({curExam:function(e){return e.curExam},examLearnData:function(e){return e.examLearnData},curLearn:function(e){return e.curLearn},curModel:function(){return this.examLearnData[this.curLearn.modelIndex]},modelLearnList:function(){return this.curModel.learns},detail:function(){var e=this.modelLearnList[this.curLearn.learnIndex];return e}}),methods:{downloadF:function(){var e=this.detail.fileName,t=e.split(".")||[],i=t.length,a=i&&t[i-1],n=e.indexOf("."+a),s=e.substring(0,n);this.util.exportFile("learn/download/"+this.detail.id,!0,{},s,"pdf")},onClickLeft:function(){this.$router.go(-1)},toLearnId:function(){this.$store.commit("setCurLearn",{modelIndex:this.curLearn.modelIndex,learnIndex:0}),this.$router.push("/exam/learn")},toExam:function(){var e=this,t=this.curExam,i="2"==t.type?t.contents.find((function(t){return t.modelId==e.curModel.id})):t.contents[0];this.$store.commit("setCurExam",Object(s["a"])(Object(s["a"])({},t),{},{content:i})),this.$router.push("/exam/examing")},startLearn:function(e){Object(l["f"])({id:e}),clearInterval(this.timer),this.timer=setInterval((function(){Object(l["f"])({id:e})}),6e4)},changeLearn:function(e){this.$store.commit("setCurLearn",{modelIndex:this.curLearn.modelIndex,learnIndex:e}),this.startLearn(this.modelLearnList[e].id),this.getLoginUserRecords()},getLoginUserRecords:function(){var e=this;return this.loading=!0,Object(l["e"])().then((function(t){if(e.loading=!1,"000000"==t.code){var i=t.data||[];return e.records=i,e.setLastNeedLearn(),Promise.resolve(i)}return Promise.reject(t.msg)})).catch((function(t){return e.loading=!1,Promise.reject(t)}))},setLastNeedLearn:function(){var e=this,t=0;if("1"==this.curExam.type&&(this.nowLearnTime=this.records.reduce((function(e,t){return e+60*t.duration}),0),t=60*this.curExam.needLearn-this.nowLearnTime),"2"==this.curExam.type){var i=this.records.filter((function(t){var i=t.modelIds||[];return"string"===typeof i&&(i=i.split(",")),i.forEach((function(e,t){i[t]=e+""})),i.includes(e.curModel.id+"")}));this.nowLearnTime=this.curModel.learnTimes=i.reduce((function(e,t){return e+60*t.duration}),0),t=60*this.curModel.needLearn-this.nowLearnTime}this.lastNeedLearn=t>0?t:0,clearInterval(this.nowTimer),this.nowTimer=setInterval((function(){e.nowLearnTime+=1,e.lastNeedLearn=e.lastNeedLearn>0?e.lastNeedLearn-1:0,e.$store.commit("setTime",{now:e.nowLearnTime,need:e.lastNeedLearn})}),1e3)}},beforeDestroy:function(){clearInterval(this.timer),clearInterval(this.nowTimer)},created:function(){this.getLoginUserRecords(),this.startLearn(this.detail.id)}},d=c,o=(i("fa95"),i("2877")),u=Object(o["a"])(d,a,n,!1,null,"0baca22d",null);t["default"]=u.exports},fa95:function(e,t,i){"use strict";i("7d7c")}}]);