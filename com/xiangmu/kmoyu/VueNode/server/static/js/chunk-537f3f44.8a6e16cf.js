(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-537f3f44"],{"34fe":function(e,t,a){},"3a9a":function(e,t,a){},"55bd":function(e,t,a){"use strict";a("34fe")},"60df":function(e,t,a){var o=Object.defineProperty,n=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var a in t)o(e,a,{get:t[a],enumerable:!0})})(s,{default:()=>m}),e.exports=(e=>((e,t,a,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of c(t))r.call(e,i)||i===a||o(e,i,{get:()=>t[i],enumerable:!(s=n(t,i))||s.enumerable});return e})(o({},"__esModule",{value:!0}),e))(s);var i=a("8bbf"),l=a("8bbf"),u=a("e5f6");const[p,d]=(0,u.createNamespace)("skeleton"),b="100%",f={row:(0,u.makeNumericProp)(0),title:Boolean,round:Boolean,avatar:Boolean,loading:u.truthProp,animate:u.truthProp,avatarSize:u.numericProp,titleWidth:u.numericProp,avatarShape:(0,u.makeStringProp)("round"),rowWidth:{type:[Number,String,Array],default:b}};var m=(0,l.defineComponent)({name:p,inheritAttrs:!1,props:f,setup(e,{slots:t,attrs:a}){const o=()=>{if(e.avatar)return(0,i.createVNode)("div",{class:d("avatar",e.avatarShape),style:(0,u.getSizeStyle)(e.avatarSize)},null)},n=()=>{if(e.title)return(0,i.createVNode)("h3",{class:d("title"),style:{width:(0,u.addUnit)(e.titleWidth)}},null)},c=t=>{const{rowWidth:a}=e;return a===b&&t===+e.row-1?"60%":Array.isArray(a)?a[t]:a},r=()=>Array(+e.row).fill("").map((e,t)=>(0,i.createVNode)("div",{class:d("row"),style:{width:(0,u.addUnit)(c(t))}},null));return()=>{var c;return e.loading?(0,i.createVNode)("div",(0,i.mergeProps)({class:d({animate:e.animate,round:e.round})},a),[o(),(0,i.createVNode)("div",{class:d("content")},[n(),r()])]):null==(c=t.default)?void 0:c.call(t)}}})},"6bb5":function(e,t,a){a("a29f"),a("3a9a")},7690:function(e,t,a){var o=Object.create,n=Object.defineProperty,c=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,l=(e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of r(t))i.call(e,s)||s===a||n(e,s,{get:()=>t[s],enumerable:!(o=c(t,s))||o.enumerable});return e},u={};((e,t)=>{for(var a in t)n(e,a,{get:t[a],enumerable:!0})})(u,{Skeleton:()=>b,default:()=>f}),e.exports=(e=>l(n({},"__esModule",{value:!0}),e))(u);var p=a("e5f6"),d=((e,t,a)=>(a=null!=e?o(s(e)):{},l(!t&&e&&e.__esModule?a:n(a,"default",{value:e,enumerable:!0}),e)))(a("60df"));const b=(0,p.withInstall)(d.default);var f=b},eea6:function(e,t,a){"use strict";a.r(t);var o=a("8bbf"),n={class:"global-coupon-list-wraper"},c={class:"mb10"},r={class:"condition-wraper"},s=["onClick"],i=["onClick"],l={class:"coupon-list-wraper"},u={class:"shop-ico"},p=["src","alt"],d={class:"shop-intro"},b={class:"shop-title"},f={class:"shop-price"},m={class:"condition"},j={class:"shop-active shop-active-canuse"},O=function(e){return Object(o.pushScopeId)("data-v-546f102c"),e=e(),Object(o.popScopeId)(),e}((function(){return Object(o.createElementVNode)("p",null,"已抢",-1)})),g={key:1,style:{"background-color":"white"}};a("14d9");var v,y=a("5880"),h=a("8960"),N=a("7690"),w=a.n(N),k=(a("6bb5"),a("2141")),C=a.n(k),V=(a("d738"),a("2dad")),E=a("ca29");function L(e){Object(h.a)().then((function(t){var a=t.data,o=a.code,n=a.data;a.message,0===o&&(e.classifyList=n)}))}function _(e,t,a,o,n){Object(h.d)(a,o,n).then((function(t){var a=t.data,o=a.code,n=a.data,c=a.message;0===o?e.couponList.push.apply(e.couponList,n):C.a.alert({message:c})})).catch((function(e){C.a.alert({message:"优惠券列表获取失败，请稍后再试"})}))}var P=Object(o.defineComponent)({components:(v={Explain:V.a,FooterNav:E.a},v[w.a.name]=w.a,v),setup:function(e,t){var a=Object(y.useStore)(),n=Object(o.computed)((function(){return a.state.app.regionId})),c=Object(o.computed)((function(){return a.state.app.regionName})),r=Object(o.computed)((function(){return a.state.app.classifyId})),s=Object(o.computed)((function(){return a.state.app.classifyName}));console.log("store: ",a);var i=Object(o.reactive)({explainName:"全球优惠",isRegion:!1,regionList:[],classifyList:[],isClassify:!1,currentPage:1,couponList:[]});return L(i),_(i,0,n.value,r.value,i.currentPage),function(e){Object(h.f)().then((function(t){var a=t.data,o=a.code,n=a.data;a.message,0===o&&(e.regionList=n)}))}(i),{state:i,regionId:n,regionName:c,classifyId:r,classifyName:s,showRegionList:function(){i.isRegion=!0,i.isClassify=!1},showCoupons:function(e,t){var o=i.regionList?i.regionList[e-1].region_name:"全球",n=i.classifyList?i.classifyList[t-1].classify_name:"购物";i.currentPage=1,i.couponList=[],a.commit("app/changeRegionId",e),a.commit("app/changeRegionName",o),a.commit("app/changeClassifyId",t),a.commit("app/changeClassifyName",n),_(i,0,e,t,i.currentPage),i.isRegion=i.isClassify=!1},loadMore:function(){i.currentPage+=1,_(i,0,n.value,r.value,i.currentPage)},showClassifyList:function(){i.isRegion=!1,i.classifyList.length||L(i),i.isClassify=!0}}}}),B=(a("55bd"),a("6b0d"));const S=a.n(B)()(P,[["render",function(e,t,a,v,y,h){var N=Object(o.resolveComponent)("explain"),w=Object(o.resolveComponent)("font"),k=Object(o.resolveComponent)("router-link"),C=Object(o.resolveComponent)("van-skeleton"),V=Object(o.resolveComponent)("footer-nav");return Object(o.openBlock)(),Object(o.createElementBlock)("div",n,[Object(o.createVNode)(N,{explainName:e.state.explainName},null,8,["explainName"]),Object(o.createElementVNode)("div",c,[Object(o.createElementVNode)("div",r,[Object(o.createElementVNode)("a",{href:"javascript:;",class:"left-wraper choose-condition",onClick:t[0]||(t[0]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.showRegionList&&e.showRegionList.apply(e,t)})},[Object(o.createElementVNode)("span",null,[Object(o.createVNode)(w,null,{default:Object(o.withCtx)((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.regionName),1)]})),_:1})])]),Object(o.createElementVNode)("a",{href:"javascript:;",class:"right-wraper choose-condition",onClick:t[1]||(t[1]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.showClassifyList&&e.showClassifyList.apply(e,t)})},[Object(o.createElementVNode)("span",null,[Object(o.createVNode)(w,null,{default:Object(o.withCtx)((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.classifyName),1)]})),_:1})])])]),Object(o.createElementVNode)("div",{class:Object(o.normalizeClass)(["list",{"dis-block":e.state.isRegion,"dis-none":!e.state.isRegion}]),id:"contry-list"},[(Object(o.openBlock)(!0),Object(o.createElementBlock)(o.Fragment,null,Object(o.renderList)(e.state.regionList,(function(t,a){return Object(o.openBlock)(),Object(o.createElementBlock)("a",{href:"javascript:;",key:a,onClick:function(a){return e.showCoupons(t.id,e.classifyId)},class:Object(o.normalizeClass)({"this-type":e.regionId==t.id})},[Object(o.createElementVNode)("span",null,Object(o.toDisplayString)(t.region_name),1)],10,s)})),128))],2),Object(o.createElementVNode)("div",{class:Object(o.normalizeClass)(["list",{"dis-block":e.state.isClassify,"dis-none":!e.state.isClassify}]),id:"classify"},[(Object(o.openBlock)(!0),Object(o.createElementBlock)(o.Fragment,null,Object(o.renderList)(e.state.classifyList,(function(t,a){return Object(o.openBlock)(),Object(o.createElementBlock)("a",{href:"javascript:;",key:a,onClick:function(a){return e.showCoupons(e.regionId,t.id)},class:Object(o.normalizeClass)({"this-type":e.classifyId==t.id})},[Object(o.createElementVNode)("span",null,Object(o.toDisplayString)(t.classify_name),1)],10,i)})),128))],2)]),Object(o.createElementVNode)("div",l,[(Object(o.openBlock)(!0),Object(o.createElementBlock)(o.Fragment,null,Object(o.renderList)(e.state.couponList,(function(e,t){return Object(o.openBlock)(),Object(o.createBlock)(k,{key:t,to:{path:"/get-coupon",query:{id:e.id,type:1}},class:Object(o.normalizeClass)({"use-discount-bg":0==e.coupon_status,"used-bg":1==e.coupon_status,"past-bg":2==e.coupon_status})},{default:Object(o.withCtx)((function(){return[Object(o.createElementVNode)("div",u,[Object(o.createElementVNode)("img",{src:e.coupon_ico_path,width:"100%",height:"100%",alt:e.coupon_name},null,8,p)]),Object(o.createElementVNode)("div",d,[Object(o.createElementVNode)("div",b,Object(o.toDisplayString)(e.coupon_name),1),Object(o.createElementVNode)("div",f,[Object(o.createElementVNode)("span",m,Object(o.toDisplayString)(e.coupon_explain),1)])]),Object(o.createElementVNode)("div",j,[O,Object(o.createElementVNode)("p",null,Object(o.toDisplayString)(e.coupon_recived_num),1),Object(o.createElementVNode)("span",{class:Object(o.normalizeClass)({"use-discount":0==e.coupon_status,used:1==e.coupon_status,past:2==e.coupon_status})},null,2)])]})),_:2},1032,["to","class"])})),128))]),e.state.couponList.length&&e.state.couponList.length%10==0?(Object(o.openBlock)(),Object(o.createElementBlock)("a",{key:0,href:"javascript:;",class:"load-more",onClick:t[2]||(t[2]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.loadMore&&e.loadMore.apply(e,t)})},"加载更多")):Object(o.createCommentVNode)("",!0),0===e.state.couponList.length?(Object(o.openBlock)(),Object(o.createElementBlock)("div",g,[Object(o.createVNode)(C,{title:"",avatar:"",row:3}),Object(o.createVNode)(C,{title:"",avatar:"",row:3}),Object(o.createVNode)(C,{title:"",avatar:"",row:3}),Object(o.createVNode)(C,{title:"",avatar:"",row:3}),Object(o.createVNode)(C,{title:"",avatar:"",row:3})])):Object(o.createCommentVNode)("",!0),Object(o.createVNode)(V)])}],["__scopeId","data-v-546f102c"]]);t.default=S}}]);